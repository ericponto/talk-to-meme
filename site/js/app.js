var SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,app=angular.module("TextToMeme",[]);app.controller("MemeCtrl",function($scope,$http){if($scope.memes=[],$scope.started="",$scope.tempTranscript="Press Start, then just talk",$scope.error="","undefined"==typeof SpeechRecognition)$scope.error="Talk to Meme requires the Speech Recognition API, which is not supported by your browser. Right now Google Chrome is the only supported browser.";else{var a=new SpeechRecognition;a.continuous=!0,a.interimResults=!0,a.onresult=function(a){for(var b=a.resultIndex,c=a.results.length,d="",e="";c>b;b++)a.results[b].isFinal?e+=a.results[b][0].transcript:d+=a.results[b][0].transcript;if(d.length&&($scope.tempTranscript=d),e.length){var f=e.split(" "),g=Math.floor(f.length/2),h=f.slice(0,g).join(" "),i=f.slice(g).join(" "),j=f.sort(function(a,b){return b.length-a.length})[0];$http.get("/search/"+j).success(function(a){$scope.memes.unshift({topText:h,bottomText:i,imageUrl:a.result[0].imageUrl})})}},a.onerror=function(a){$scope.error="Error: "+a.error,$scope.started=!1},a.onend=function(){$scope.started=!1},$scope.startRecording=function(){a.start(),$scope.started=!0},$scope.stopRecording=function(){a.stop(),$scope.started=!1}}});